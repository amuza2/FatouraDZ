<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:FatouraDZ.ViewModels"
        xmlns:views="using:FatouraDZ.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="FatouraDZ.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="FatouraDZ - Application de Facturation"
        MinWidth="900" MinHeight="600">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid ColumnDefinitions="220,*">
        <!-- Menu latÃ©ral -->
        <Border Grid.Column="0" Background="#1E293B">
            <StackPanel Spacing="5" Margin="0,20,0,0">
                <!-- Logo / Titre -->
                <TextBlock Text="FatouraDZ" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,30"/>

                <!-- Navigation -->
                <Button Content="ðŸ  Accueil" 
                        Classes="nav-button"
                        Command="{Binding AfficherAccueilCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <Button Content="âž• Nouvelle facture" 
                        Classes="nav-button"
                        Command="{Binding AfficherNouvelleFactureCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <Button Content="ðŸ“‹ Historique" 
                        Classes="nav-button"
                        Command="{Binding AfficherHistoriqueCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <Button Content="ðŸ“¦ Archives" 
                        Classes="nav-button"
                        Command="{Binding AfficherArchivesCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <Separator Background="#334155" Margin="10,20"/>

                <Button Content="âš™ï¸ Mes informations" 
                        Classes="nav-button"
                        Command="{Binding AfficherConfigurationCommand}"/>

                <Separator Background="#334155" Margin="10,10"/>

                <!-- Gestion des donnÃ©es -->
                <TextBlock Text="DonnÃ©es" 
                           Foreground="#94A3B8" FontSize="11" 
                           Margin="15,10,0,5"/>

                <Button Content="ðŸ“¤ Exporter donnÃ©es" 
                        Classes="nav-button"
                        Command="{Binding ExporterBaseDeDonneesCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <Button Content="ðŸ“¥ Importer donnÃ©es" 
                        Classes="nav-button"
                        Command="{Binding ImporterBaseDeDonneesCommand}"
                        IsVisible="{Binding EstEntrepreneurConfigure}"/>

                <!-- Message de gestion des donnÃ©es -->
                <TextBlock Text="{Binding MessageGestionDonnees}" 
                           Foreground="#22C55E" FontSize="10"
                           TextWrapping="Wrap"
                           Margin="15,10"
                           IsVisible="{Binding MessageGestionDonnees, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

                <Separator Background="#334155" Margin="10,10"/>

                <Button Content="â„¹ï¸ Ã€ propos" 
                        Classes="nav-button"
                        Command="{Binding AfficherAProposCommand}"/>
            </StackPanel>
        </Border>

        <!-- Contenu principal -->
        <Border Grid.Column="1" Background="#F1F5F9">
            <ContentControl Content="{Binding ContenuActuel}">
                <ContentControl.DataTemplates>
                    <DataTemplate DataType="vm:AccueilViewModel">
                        <views:AccueilView/>
                    </DataTemplate>
                    <DataTemplate DataType="vm:EntrepreneurConfigViewModel">
                        <views:EntrepreneurConfigView/>
                    </DataTemplate>
                    <DataTemplate DataType="vm:NouvelleFactureViewModel">
                        <views:NouvelleFactureView/>
                    </DataTemplate>
                    <DataTemplate DataType="vm:HistoriqueFacturesViewModel">
                        <views:HistoriqueFacturesView/>
                    </DataTemplate>
                    <DataTemplate DataType="vm:ArchiveFacturesViewModel">
                        <views:ArchiveFacturesView/>
                    </DataTemplate>
                    <DataTemplate DataType="vm:AProposViewModel">
                        <views:AProposView/>
                    </DataTemplate>
                </ContentControl.DataTemplates>
            </ContentControl>
        </Border>
    </Grid>

</Window>
