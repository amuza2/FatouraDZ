<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:FatouraDZ.ViewModels"
             xmlns:models="using:FatouraDZ.Models"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="900"
             x:Class="FatouraDZ.Views.NouvelleFactureView"
             x:DataType="vm:NouvelleFactureViewModel">

    <Design.DataContext>
        <vm:NouvelleFactureViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*">
        <!-- Header with back button -->
        <Border Grid.Row="0" Background="#F8FAFC" Padding="30,15" BorderBrush="#E2E8F0" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,*">
                <Button Grid.Column="0" Content="â† Retour" 
                        Command="{Binding AnnulerCommand}"
                        Background="Transparent"
                        Foreground="#64748B"
                        Padding="10,8"/>
                <TextBlock Grid.Column="1" Text="{Binding TitreFormulaire}" 
                           FontSize="20" FontWeight="Bold" Foreground="#1E293B"
                           VerticalAlignment="Center" Margin="20,0,0,0"/>
            </Grid>
        </Border>
        
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel Spacing="20" MaxWidth="1000" HorizontalAlignment="Center">

            <!-- Message d'erreur -->
            <Border Background="#FFEBEE" BorderBrush="#EF4444" BorderThickness="1" 
                    CornerRadius="4" Padding="10"
                    IsVisible="{Binding ErreurMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <TextBlock Text="{Binding ErreurMessage}" Foreground="#EF4444" TextWrapping="Wrap"/>
            </Border>

            <!-- Message de succÃ¨s -->
            <Border Background="#E8F5E9" BorderBrush="#10B981" BorderThickness="1" 
                    CornerRadius="4" Padding="10"
                    IsVisible="{Binding EstSauvegarde}">
                <TextBlock Text="âœ“ Facture sauvegardÃ©e avec succÃ¨s" Foreground="#10B981"/>
            </Border>

            <!-- Section: Type de facture et informations -->
            <Border Classes="card">
                <StackPanel Spacing="15">
                    <TextBlock Text="Informations de la facture" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/>
                    
                    <Grid ColumnDefinitions="*,20,*,20,*">
                        <!-- Type de facture -->
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="Type de facture" FontWeight="Medium"/>
                            <ComboBox SelectedIndex="{Binding TypeFactureIndex}" HorizontalAlignment="Stretch">
                                <ComboBoxItem Content="Facture normale"/>
                                <ComboBoxItem Content="Facture d'avoir"/>
                                <ComboBoxItem Content="Facture proforma"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <!-- NumÃ©ro de facture -->
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="NumÃ©ro de facture" FontWeight="Medium"/>
                            <TextBox Text="{Binding NumeroFacture}"/>
                        </StackPanel>
                        
                        <!-- Mode de paiement -->
                        <StackPanel Grid.Column="4" Spacing="4">
                            <TextBlock Text="Mode de paiement" FontWeight="Medium"/>
                            <ComboBox ItemsSource="{Binding ModesPaiement}" 
                                      SelectedItem="{Binding ModePaiement}"
                                      HorizontalAlignment="Stretch"/>
                        </StackPanel>
                    </Grid>
                    
                    <!-- Statut de paiement -->
                    <CheckBox Content="Facture payÃ©e" IsChecked="{Binding EstPaye}" 
                              FontWeight="Medium" Margin="0,5,0,0"/>

                    <!-- Date de validitÃ© (pour proforma uniquement) -->
                    <Border Background="#DBEAFE" CornerRadius="4" Padding="15" 
                            IsVisible="{Binding AfficherDateValidite}">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âš ï¸ Document sans valeur comptable ni fiscale" FontWeight="SemiBold" Foreground="#1E40AF"/>
                            <TextBlock Text="Cette facture proforma est une estimation et ne constitue pas une facture dÃ©finitive." 
                                       Foreground="#3B82F6" TextWrapping="Wrap" FontSize="12"/>
                            <StackPanel Spacing="4">
                                <TextBlock Text="Date limite de validitÃ© de l'offre" FontWeight="Medium"/>
                                <DatePicker SelectedDate="{Binding DateValidite}" 
                                            HorizontalAlignment="Left" MinWidth="200"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- RÃ©fÃ©rence facture originale (pour avoir uniquement) -->
                    <Border Background="#FEF3C7" CornerRadius="4" Padding="15" 
                            IsVisible="{Binding AfficherReferenceOrigine}">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âš ï¸ Facture d'avoir - Document rectificatif" FontWeight="SemiBold" Foreground="#92400E"/>
                            <TextBlock Text="Cette facture annule ou corrige une facture prÃ©cÃ©demment Ã©mise. Elle doit rÃ©fÃ©rencer la facture originale." 
                                       Foreground="#B45309" TextWrapping="Wrap" FontSize="12"/>
                            <StackPanel Spacing="4">
                                <TextBlock Text="NÂ° de la facture Ã  corriger/annuler *" FontWeight="Medium"/>
                                <TextBox Text="{Binding NumeroFactureOrigine}" 
                                         Watermark="FAC-2025-XXX" MaxWidth="300" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Grid ColumnDefinitions="*,20,*">
                        <!-- Date de facture -->
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="Date de facture" FontWeight="Medium"/>
                            <DatePicker SelectedDate="{Binding DateFacture}" 
                                        HorizontalAlignment="Stretch"/>
                        </StackPanel>
                        
                        <!-- Date d'Ã©chÃ©ance -->
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="Date d'Ã©chÃ©ance" FontWeight="Medium"/>
                            <DatePicker SelectedDate="{Binding DateEcheance}"
                                        HorizontalAlignment="Stretch"/>
                            <TextBlock Text="{Binding ErreurDateEcheance}" Classes="error-message"
                                       IsVisible="{Binding ErreurDateEcheance, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </StackPanel>
                    </Grid>

                    <!-- DÃ©tails du paiement (visible selon le mode) -->
                    <Border Background="#FEF3C7" CornerRadius="4" Padding="15" 
                            IsVisible="{Binding RequiertDetailsPaiement}">
                        <StackPanel Spacing="10">
                            <TextBlock Text="ðŸ’³ DÃ©tails du paiement" FontWeight="SemiBold" Foreground="#92400E"/>
                            <StackPanel Spacing="4">
                                <TextBlock Text="NÂ° PiÃ¨ce (chÃ¨que, virement, etc.)" FontWeight="Medium"/>
                                <TextBox Text="{Binding PaiementNumeroPiece}" 
                                         Watermark="NÂ° chÃ¨que, NÂ° virement..." MaxWidth="300" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Section: Informations client -->
            <Border Classes="card">
                <StackPanel Spacing="15">
                    <TextBlock Text="Informations du client" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/>
                    
                    <!-- Type de client -->
                    <StackPanel Spacing="4" MaxWidth="300" HorizontalAlignment="Left">
                        <TextBlock Text="Type de client" FontWeight="Medium"/>
                        <ComboBox SelectedIndex="{Binding ClientBusinessTypeIndex}" HorizontalAlignment="Stretch">
                            <ComboBoxItem Content="Auto-Entrepreneur"/>
                            <ComboBoxItem Content="Forfait"/>
                            <ComboBoxItem Content="SociÃ©tÃ© (RÃ©el)"/>
                        </ComboBox>
                    </StackPanel>
                    
                    <!-- Nom et TÃ©lÃ©phone -->
                    <Grid ColumnDefinitions="*,20,*">
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="Nom du client *" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientNom}" Watermark="Nom complet ou raison sociale"
                                     Classes.error="{Binding ErreurClientNom, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                            <TextBlock Text="{Binding ErreurClientNom}" Classes="error-message"
                                       IsVisible="{Binding ErreurClientNom, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="TÃ©lÃ©phone *" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientTelephone}" Watermark="05XX XX XX XX"
                                     Classes.error="{Binding ErreurClientTelephone, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                            <TextBlock Text="{Binding ErreurClientTelephone}" Classes="error-message"
                                       IsVisible="{Binding ErreurClientTelephone, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </StackPanel>
                    </Grid>

                    <!-- Adresse -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="Adresse *" FontWeight="Medium"/>
                        <TextBox Text="{Binding ClientAdresse}" Watermark="Adresse complÃ¨te"
                                 Classes.error="{Binding ErreurClientAdresse, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        <TextBlock Text="{Binding ErreurClientAdresse}" Classes="error-message"
                                   IsVisible="{Binding ErreurClientAdresse, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                    </StackPanel>

                    <!-- Email et Fax -->
                    <Grid ColumnDefinitions="*,20,*">
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="Email (optionnel)" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientEmail}" Watermark="email@exemple.com"
                                     Classes.error="{Binding ErreurClientEmail, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                            <TextBlock Text="{Binding ErreurClientEmail}" Classes="error-message"
                                       IsVisible="{Binding ErreurClientEmail, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="Fax (optionnel)" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientFax}" Watermark="NumÃ©ro de fax"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Section: Informations fiscales client -->
            <Border Classes="card">
                <StackPanel Spacing="15">
                    <TextBlock Text="Informations fiscales du client" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/>
                    <TextBlock Text="Ces informations varient selon le type de client sÃ©lectionnÃ©" 
                               Foreground="#64748B" FontSize="12"/>
                    
                    <!-- ActivitÃ© -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="ActivitÃ©" FontWeight="Medium"/>
                        <TextBox Text="{Binding ClientActivite}" Watermark="ActivitÃ© commerciale"/>
                    </StackPanel>

                    <Grid ColumnDefinitions="*,20,*">
                        <!-- NÂ° Immatriculation (Auto-Entrepreneur only) -->
                        <StackPanel Grid.Column="0" Spacing="4" IsVisible="{Binding ClientAfficherNumeroImmatriculation}">
                            <TextBlock Text="NÂ° Immatriculation" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientNumeroImmatriculation}" Watermark="NumÃ©ro d'immatriculation"/>
                        </StackPanel>
                        <!-- RC (Forfait and Reel only) -->
                        <StackPanel Grid.Column="0" Spacing="4" IsVisible="{Binding ClientAfficherRC}">
                            <TextBlock Text="Registre du Commerce (RC)" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientRc}" Watermark="NumÃ©ro RC"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="NIF" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientNif}" Watermark="NumÃ©ro NIF"/>
                        </StackPanel>
                    </Grid>
                    <Grid ColumnDefinitions="*,20,*">
                        <StackPanel Grid.Column="0" Spacing="4">
                            <TextBlock Text="Article d'Imposition (AI)" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientAi}" Watermark="NumÃ©ro AI"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Spacing="4">
                            <TextBlock Text="NIS (15 chiffres)" FontWeight="Medium"/>
                            <TextBox Text="{Binding ClientNis}" Watermark="000000000000000"/>
                        </StackPanel>
                    </Grid>
                    
                    <!-- Capital Social (Reel/Company only) -->
                    <StackPanel Spacing="4" IsVisible="{Binding ClientAfficherCapitalSocial}">
                        <TextBlock Text="Capital social" FontWeight="Medium"/>
                        <TextBox Text="{Binding ClientCapitalSocial}" Watermark="Ex: 100 000 DZD"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Section: Lignes de facture -->
            <Border Classes="card">
                <StackPanel Spacing="15">
                    <Grid ColumnDefinitions="*,Auto">
                        <StackPanel>
                            <TextBlock Text="Services / Produits" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/>
                            <TextBlock Text="{Binding ErreurLignes}" Classes="error-message"
                                       IsVisible="{Binding ErreurLignes, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                        </StackPanel>
                        <Button Grid.Column="1" Content="Ajouter une ligne" 
                                Command="{Binding AjouterLigneCommand}"
                                Padding="15,8"/>
                    </Grid>

                    <!-- En-tÃªte du tableau -->
                    <Grid ColumnDefinitions="50,*,130,100,100,100,120,40" Background="#F1F5F9" Margin="0,10,0,0">
                        <TextBlock Grid.Column="0" Text="RÃ©f" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="1" Text="DÃ©signation" FontWeight="SemiBold" Padding="8"/>
                        <TextBlock Grid.Column="2" Text="QtÃ©" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="3" Text="UnitÃ©" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="4" Text="Prix H.T" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="5" Text="TVA" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="6" Text="Total H.T" FontWeight="SemiBold" Padding="8" HorizontalAlignment="Right"/>
                        <TextBlock Grid.Column="7" Text="" Padding="8"/>
                    </Grid>

                    <!-- Lignes -->
                    <ItemsControl ItemsSource="{Binding Lignes}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="vm:LigneFactureViewModel">
                                <Grid ColumnDefinitions="50,*,130,100,100,100,120,40" Margin="0,5,0,0">
                                    <TextBox Grid.Column="0" Text="{Binding Reference}" 
                                             Watermark="{Binding NumeroLigne}" Margin="2,0"/>
                                    <TextBox Grid.Column="1" Text="{Binding Designation}" 
                                             Watermark="Description du service/produit" Margin="2,0"/>
                                    <NumericUpDown Grid.Column="2" Value="{Binding Quantite}" 
                                                   Minimum="0.01" Increment="1" FormatString="0.##" Margin="2,0"/>
                                    <ComboBox Grid.Column="3" SelectedIndex="{Binding UniteIndex}" Margin="2,0"
                                              HorizontalAlignment="Stretch">
                                        <ComboBoxItem Content="PCS"/>
                                        <ComboBoxItem Content="BOIT"/>
                                        <ComboBoxItem Content="KG"/>
                                        <ComboBoxItem Content="L"/>
                                        <ComboBoxItem Content="M"/>
                                        <ComboBoxItem Content="MÂ²"/>
                                        <ComboBoxItem Content="MÂ³"/>
                                        <ComboBoxItem Content="H"/>
                                        <ComboBoxItem Content="J"/>
                                        <ComboBoxItem Content="FORF"/>
                                    </ComboBox>
                                    <TextBox Grid.Column="4" Text="{Binding PrixUnitaire}" 
                                             Watermark="0.00" Margin="2,0"/>
                                    <ComboBox Grid.Column="5" SelectedIndex="{Binding TauxTVAIndex}" Margin="2,0"
                                              HorizontalAlignment="Stretch">
                                        <ComboBoxItem Content="19%"/>
                                        <ComboBoxItem Content="9%"/>
                                        <ComboBoxItem Content="0%"/>
                                    </ComboBox>
                                    <TextBlock Grid.Column="6" Text="{Binding TotalHT, StringFormat={}{0:N2}}" 
                                               VerticalAlignment="Center" HorizontalAlignment="Right" Margin="5,0"
                                               FontWeight="Medium"/>
                                    <Button Grid.Column="7" Content="ðŸ—‘ï¸" 
                                            Command="{Binding $parent[ItemsControl].((vm:NouvelleFactureViewModel)DataContext).SupprimerLigneCommand}"
                                            CommandParameter="{Binding}"
                                            Padding="5" Background="Transparent"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Section: Options fiscales -->
            <!-- <Border Classes="card">
                <StackPanel Spacing="15">
                    <TextBlock Text="Options fiscales" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/> -->
                    
                    <!-- Retenue Ã  la source -->
                    <!-- <Border Background="#F0F9FF" CornerRadius="4" Padding="15">
                        <StackPanel Spacing="10">
                            <CheckBox Content="Appliquer une retenue Ã  la source" 
                                      IsChecked="{Binding AppliquerRetenueSource}"/>
                            <StackPanel Orientation="Horizontal" Spacing="10" 
                                        IsVisible="{Binding AppliquerRetenueSource}">
                                <TextBlock Text="Taux de retenue :" VerticalAlignment="Center"/>
                                <NumericUpDown Value="{Binding TauxRetenueSource}" 
                                               Minimum="0" Maximum="100" Increment="5" 
                                               FormatString="0" Width="100"/>
                                <TextBlock Text="%" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock Text="La retenue Ã  la source est un prÃ©lÃ¨vement fiscal effectuÃ© par le client sur le montant brut."
                                       Foreground="#64748B" FontSize="11" TextWrapping="Wrap"
                                       IsVisible="{Binding AppliquerRetenueSource}"/>
                        </StackPanel>
                    </Border> -->
                <!-- </StackPanel>
            </Border> -->

            <!-- Section: RÃ©capitulatif -->
            <Border Classes="card">
                <Grid ColumnDefinitions="*,350">
                    <!-- Espace rÃ©servÃ© -->
                    <StackPanel Grid.Column="0" Spacing="15">
                    </StackPanel>

                    <!-- Totaux -->
                    <Border Grid.Column="1" Background="#F8FAFC" CornerRadius="8" Padding="20">
                        <StackPanel Spacing="10">
                            <TextBlock Text="RÃ©capitulatif" FontSize="16" FontWeight="SemiBold" Foreground="#2563EB"/>
                            
                            <StackPanel Spacing="5">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBlock Text="Total HT"/>
                                    <TextBlock Grid.Column="1" Text="{Binding TotalHT, StringFormat={}{0:N2} DA}" 
                                               FontWeight="Medium" HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,Auto" IsVisible="{Binding TotalTVA19}">
                                    <TextBlock Text="TVA 19%"/>
                                    <TextBlock Grid.Column="1" Text="{Binding TotalTVA19, StringFormat={}{0:N2} DA}" 
                                               HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,Auto" IsVisible="{Binding TotalTVA9}">
                                    <TextBlock Text="TVA 9%"/>
                                    <TextBlock Grid.Column="1" Text="{Binding TotalTVA9, StringFormat={}{0:N2} DA}" 
                                               HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBlock Text="Total TTC"/>
                                    <TextBlock Grid.Column="1" Text="{Binding TotalTTC, StringFormat={}{0:N2} DA}" 
                                               FontWeight="Medium" HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,Auto" IsVisible="{Binding AppliquerTimbre}">
                                    <TextBlock Text="Timbre fiscal"/>
                                    <TextBlock Grid.Column="1" Text="{Binding TimbreFiscal, StringFormat={}{0:N2} DA}" 
                                               HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="*,Auto" IsVisible="{Binding AppliquerRetenueSource}">
                                    <TextBlock Text="{Binding TauxRetenueSource, StringFormat='Retenue source ({0}% du HT)'}"/>
                                    <TextBlock Grid.Column="1" Text="{Binding RetenueSource, StringFormat='-{0:N2} DA'}" 
                                               HorizontalAlignment="Right" Foreground="#EF4444"/>
                                </Grid>
                                
                                <Separator Margin="0,5"/>
                                
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBlock Text="{Binding TypeFactureIndex, Converter={x:Static vm:TypeFactureToLabelConverter.Instance}}" 
                                               FontWeight="Bold" FontSize="16"/>
                                    <TextBlock Grid.Column="1" Text="{Binding MontantTotal, StringFormat={}{0:N2} DA}" 
                                               FontWeight="Bold" FontSize="16" Foreground="#2563EB" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Montant en lettres -->
            <Border Classes="card">
                <StackPanel Spacing="10">
                    <TextBlock Text="Montant en lettres" FontSize="14" FontWeight="SemiBold" Foreground="#64748B"/>
                    <TextBlock Text="{Binding MontantEnLettres}" FontStyle="Italic" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- Boutons d'action -->
            <StackPanel Orientation="Horizontal" Spacing="15" HorizontalAlignment="Center" Margin="0,20,0,60">
                <Button Content="RÃ©initialiser" 
                        Command="{Binding ReinitialiserCommand}"
                        Padding="20,12"/>
                <Button Content="PrÃ©visualiser" 
                        Command="{Binding PrevisualiserCommand}"
                        Padding="20,12"/>
                <Button Content="Enregistrer la facture" 
                        Classes="primary"
                        Command="{Binding SauvegarderCommand}"
                        Padding="30,12"
                        FontSize="14"/>
            </StackPanel>

        </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
